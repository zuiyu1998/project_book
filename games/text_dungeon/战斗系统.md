# 战斗系统

## 什么战斗系统
战斗是杀死敌人。战斗系统就是量化的可击败敌人的一套设计。它抽象了现实生活中的一些要素，作为可以影响伤害的条件。

- 运气
- 弱点
- 技艺
- 装备
- 地形
- 主场
- 客场
- 其他

我们抽象的要素越多，战斗系统就越丰富。战斗流程总结：

战斗系统的几个阶段
- 回合制的谁是先手
- 判断命中
- 计算伤害
- 结算伤害

- 判断是否命中
  - 闪避
  - 护甲
  - 命中
  - 骰子
- 计算伤害值
  
  - 基础伤害
  - 抗性
  - 重击
  - 重击伤害
  - 格挡
  - 伤害属性
  - 附伤

- 伤害结算

战斗流程
- 统计所有进入战斗的单位
- 决定单位之间的行动顺序
- 活动单位行动
- 获取活动单位和受激单位的战斗属性
- 开始战斗
- 进行战斗结算
- 判定战斗是否结束，失败替换活动单位，重复战斗过程
- 战斗结束
